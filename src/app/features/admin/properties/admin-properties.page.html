<section class="space-y-6">
  <div class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
    <div>
      <h1 class="text-2xl font-semibold text-slate-900 md:text-3xl dark:text-slate-100">{{ 'admin.properties.title' | t }}</h1>
      <p class="mt-1 text-sm text-slate-600 dark:text-slate-300">{{ 'admin.properties.subtitle' | t }}</p>
    </div>
    <div class="flex gap-2">
      <button
        type="button"
        class="inline-flex items-center justify-center rounded-lg border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-600 transition hover:border-brand hover:text-slate-900 dark:border-slate-600 dark:text-slate-200 dark:hover:border-brand"
        (click)="refresh()"
      >
        {{ 'hero.cta.primary' | t }}
      </button>
      <button
        type="button"
        class="inline-flex items-center justify-center rounded-lg bg-brand px-4 py-2 text-sm font-semibold text-slate-900 transition hover:bg-brand-light"
      >
        {{ 'admin.properties.button.new' | t }}
      </button>
    </div>
  </div>

  <div *ngIf="propertyStore.loading()" class="rounded-3xl border border-slate-200 bg-white/80 p-6 text-center text-sm text-slate-600 dark:border-slate-700 dark:bg-slate-800/80 dark:text-slate-300">
    {{ 'properties.loading' | t }}
  </div>

  <div *ngIf="propertyStore.error()" class="rounded-3xl border border-slate-200 bg-rose-100/70 p-6 text-center text-sm text-rose-700 dark:border-rose-400/40 dark:bg-rose-400/10 dark:text-rose-200">
    {{ propertyStore.error() || ('properties.error' | t) }}
  </div>

  <div *ngIf="!propertyStore.loading() && !propertyStore.error() && propertyStore.properties().length === 0" class="rounded-3xl border border-slate-200 bg-white/80 p-6 text-center text-sm text-slate-600 dark:border-slate-700 dark:bg-slate-800/80 dark:text-slate-300">
    {{ 'properties.empty' | t }}
  </div>

  <div *ngIf="propertyStore.properties().length > 0" class="overflow-hidden rounded-3xl border border-slate-200 bg-white/90 shadow-sm dark:border-slate-700 dark:bg-slate-800/80">
    <div class="hidden grid-cols-12 gap-4 border-b border-slate-200 bg-slate-100/60 px-6 py-3 text-xs font-semibold uppercase tracking-wider text-slate-500 dark:border-slate-700 dark:bg-slate-800/60 md:grid">
      <span class="col-span-5">{{ 'admin.properties.table.property' | t }}</span>
      <span class="col-span-2">{{ 'properties.filters.status' | t : 'Status' }}</span>
      <span class="col-span-2">{{ 'admin.properties.table.type' | t }}</span>
      <span class="col-span-2">{{ 'admin.properties.table.createdAt' | t : 'Criado em' }}</span>
      <span class="col-span-1 text-right">{{ 'landing.featured.button' | t }}</span>
    </div>
    <div class="divide-y divide-slate-200 dark:divide-slate-700">
      <div
        *ngFor="let property of propertyStore.properties()"
        class="grid grid-cols-1 gap-4 px-6 py-4 text-sm text-slate-600 dark:text-slate-300 md:grid-cols-12 md:items-center"
      >
        <div class="md:col-span-5">
          <div class="font-medium text-slate-900 dark:text-slate-100">{{ property.title }}</div>
          <div class="text-xs text-slate-500 dark:text-slate-400">
            <ng-container *ngIf="property.city; else adminLocationFallback">
              {{ property.city }}
              <span *ngIf="property.state"> - {{ property.state }}</span>
            </ng-container>
          </div>
        </div>
        <div class="md:col-span-2">
          <span class="inline-flex items-center rounded-full bg-slate-100/60 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-600 dark:bg-slate-700/40 dark:text-slate-200">
            {{ property.status }}
          </span>
        </div>
        <div class="md:col-span-2 text-sm text-slate-500 dark:text-slate-300">
          {{ property.type }}
        </div>
        <div class="md:col-span-2 text-sm text-slate-500 dark:text-slate-300">
          <ng-container *ngIf="property.createdAt; else adminCreatedFallback">
            {{ property.createdAt | date:'short' }}
          </ng-container>
        </div>
        <div class="md:col-span-1 flex justify-end gap-2">
          <a
            [routerLink]="['/imovel', property.id]"
            target="_blank"
            class="inline-flex items-center justify-center rounded-lg border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-600 transition hover:border-brand hover:text-slate-900 dark:border-slate-600 dark:text-slate-200 dark:hover:border-brand"
          >
            {{ 'landing.featured.button' | t }}
          </a>
          <a
            [routerLink]="['/admin/imoveis', property.id]"
            class="inline-flex items-center justify-center rounded-lg border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-600 transition hover:border-brand hover:text-slate-900 dark:border-slate-600 dark:text-slate-200 dark:hover:border-brand"
          >
            {{ 'admin.properties.table.property' | t }}
          </a>
        </div>
      </div>
    </div>
    <ng-template #adminLocationFallback>
      {{ 'properties.location.fallback' | t : 'Localização não informada' }}
    </ng-template>
    <ng-template #adminCreatedFallback>
      {{ 'property.detail.info.createdAt.fallback' | t : 'Não informado' }}
    </ng-template>
  </div>
</section>
